{"version":3,"sources":["site.coffee"],"names":[],"mappings":"CAAA,WAAA,GAAA,GAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,CAAA,GAAe,aACf,EAAe,EACf,EAAe,0BAA0B,OACzC,GAAe,EACf,EAAkB,WAChB,GAAA,GAAA,EAAA,EAAA,CAAA,KAAA,GAAA,oBAAA,aAAA,aAAA,cAAA,OAAA,MAAA,UAAA,EAAA,EAAA,EAAA,EAAA,OAAA,EAAA,EAAA,IAEE,YAAmB,IAAQ,SAA3B,MAAO,MAGJ,UAAY,mBAAiB,YAClC,EAAa,iBACX,MAAK,UAAY,SAAC,GAChB,GAAA,GAAA,EAAA,EAAA,EAAA,CAGA,KAHA,EAAU,EAAE,KACZ,EAAU,EAAO,OACjB,EAAc,GAAA,YAAe,GAAA,aAAY,IACF,EAAA,EAAA,EAAA,GAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAvC,EAAK,GAAK,EAAO,WAAW,SAC5B,MAAK,YAAgB,GAAA,OAAM,EAAK,SAAS,KAAM,gBAC/C,KAAK,UAGT,EAAa,IAAI,gBAAoB,GAAA,OAAO,IAA7C,EAAW,WAA6D,QACrE,KAAM,6BAGV,EAAa,SAAC,EAAM,GAClB,GAAA,SAAG,IACD,MAAO,kEACV,EAA+B,aAE9B,EAAS,GAAA,YACT,EAAO,iBAAiB,OAAQ,WAC9B,GAAA,SAAA,GAAM,GAAA,OACN,EAAI,iBAAiB,OAAQ,WAC3B,GAAA,GAAA,EAAA,EAAA,CAOA,OAPC,GAAA,EAAA,MAAO,EAAA,EAAA,OACR,EAAkB,SAAS,cAAc,UACzC,EAAO,MAAW,EAClB,EAAO,OAAW,EAElB,EAAO,WAAW,MAAM,UAAU,EAAK,EAAG,EAAG,EAAO,GAEjD,EAAO,OACR,EAAO,OAAO,EAAI,EAAS,IAE3B,EAAa,GAAA,QAAO,GACpB,EAAO,UAAY,SAAC,SAAM,GAAG,EAAE,OAC/B,EAAO,YAAY,KAAK,EAAO,UAAU,EAAS,GAAS,MAAA,QAE/D,EAAI,IAAM,EAAO,SAEnB,EAAO,cAAc,IAGvB,EAAS,EAAU,EAEnB,EAAgB,iBACd,GAAU,OAAO,WACjB,EAAU,OAAO,aAGnB,SAAS,iBAAiB,mBAAoB,WAC5C,GAAA,GAAA,EAAA,QAAA,KACA,EAAO,SAAS,eAAe,aAE/B,iBAAiB,YAAa,SAAC,GAC7B,GAAA,GAAA,QAD8B,GAAA,EAAA,EAAG,EAAA,EAAA,EACjC,EAAK,MAAM,UACR,gBAAL,EAAK,EAAS,GAAM,KAA2B,QAA/C,EAAK,EAAU,GAAM,KAA6D,WAGlF,iBAAiB,SAAU,GAG3B,SAAS,eAAe,mBAAmB,iBAAiB,QAAS,SAAC,SACpE,GAAE,iBACF,MAAM,6CAGR,EAAY,SAAS,eAAe,cACpC,EAAY,SAAS,eAAe,UAEpC,EAAU,YAAc,SAAC,SACvB,GAAE,iBACF,KAAC,UAAY,cAEf,EAAU,WAAa,SAAC,SACtB,GAAE,kBAEJ,EAAU,YAAc,iBACtB,MAAC,UAAY,IAEf,EAAU,OAAS,SAAC,GAClB,GAAA,GAAA,EAAA,EAAA,EAAA,MAAA,EAAE,iBACF,KAAC,UAAY,GACb,EAAA,EAAA,aAAA,MAAA,KAAA,EAAA,EAAA,EAAA,EAAA,OAAA,EAAA,EAAA,WAAsC,EAAA,KAAG,SAAC,GACxC,MAAO,GAAK,OAAQ,EACX,MAAM,gDAEf,EAAW,EAAM,SAAC,GAChB,GAAA,EAIA,OAJA,GAAU,SAAS,cAAc,OACjC,EAAI,IAAM,IAAI,gBAAgB,GAC9B,EAAO,YAAY,GAEhB,GACD,EAAO,UAAY,GACnB,GAAmB,GAFrB,UATsC","file":"site.js","sourcesContent":["jpgType      = 'image/jpeg'\njpgQual      = 1\nheaderSize   = 'data:image/jpeg;base64,'.length\noutputHidden = true\nmissing      = do ->\n  for cons in ['HTMLCanvasElement', 'FileReader', 'Uint8Array', 'ArrayBuffer',\n               'Blob', 'URL', 'Worker']\n    return cons unless cons of window\n\n\nunless 'toBlob' of HTMLCanvasElement::\n  createBlob = ->\n    self.onmessage = (e) ->\n      binary  = e.data\n      len     = binary.length\n      view    = new Uint8Array new ArrayBuffer len\n      view[i] = binary.charCodeAt i for i in [0...len]\n      self.postMessage new Blob [view.buffer], type: 'image/jpeg'\n      self.close()\n\n\n  blobWorker = URL.createObjectURL new Blob [\"(#{ createBlob.toString() })()\"],\n    type: 'application/javascript'\n\n\ncleanImage = (file, cb) ->\n  if missing\n    alert \"Sorry, your browser is too old to support ExifExodus.\n           (Missing #{ missing } support)\"\n\n  reader = new FileReader\n  reader.addEventListener 'load', ->\n    img = new Image\n    img.addEventListener 'load', ->\n      {width, height} = img\n      canvas          = document.createElement 'canvas'\n      canvas.width    = width\n      canvas.height   = height\n\n      canvas.getContext('2d').drawImage img, 0, 0, width, height\n\n      if canvas.toBlob\n        canvas.toBlob cb, jpgType, jpgQual\n      else\n        worker = new Worker blobWorker\n        worker.onmessage = (e) -> cb e.data\n        worker.postMessage atob canvas.toDataURL(jpgType, jpgQual)[headerSize...]\n\n    img.src = reader.result\n\n  reader.readAsDataURL file\n\n\nwWidth = wHeight = 1\n\nsetDimensions = ->\n  wWidth  = window.innerWidth\n  wHeight = window.innerHeight\n\n\ndocument.addEventListener 'DOMContentLoaded', ->\n  setDimensions()\n  logo = document.getElementById 'logo-text'\n\n  addEventListener 'mousemove', ({x, y}) ->\n    logo.style.transform =\n      \"translate3d(#{ (x - (wWidth / 2)) / -100 }px, #{ (y - (wHeight / 2)) / -100 }px, 0)\"\n\n\n  addEventListener 'resize', setDimensions\n\n\n  document.getElementById('bookmarklet-btn').addEventListener 'click', (e) ->\n    e.preventDefault()\n    alert 'Drag this button to your bookmarks bar!'\n\n\n  photoDrop = document.getElementById 'photo-drop'\n  output    = document.getElementById 'output'\n\n  photoDrop.ondragenter = (e) ->\n    e.preventDefault()\n    @className = 'drag-hover'\n\n  photoDrop.ondragover = (e) ->\n    e.preventDefault()\n\n  photoDrop.ondragleave = ->\n    @className = ''\n\n  photoDrop.ondrop = (e) ->\n    e.preventDefault()\n    @className = ''\n    for file in e.dataTransfer.files then do (file) ->\n      unless file.type is jpgType\n        return alert 'Sorry, ExifExodus only works with JPG files.'\n\n      cleanImage file, (blob) ->\n        img     = document.createElement 'img'\n        img.src = URL.createObjectURL blob\n        output.appendChild img\n\n        if outputHidden\n          output.className = ''\n          outputHidden     = false\n\n"],"sourceRoot":"/source/"}